[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Data analyze blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Data Analyze blog",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n  \n\n\n\n\nData transformation\n\n\nOpen Data Analysis ch02\n\n\n\n\nR\n\n\nopen data analysis\n\n\n \n\n\n\n\nMar 22, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\n  \n\n\n\n\npandas\n\n\nData Mining basic\n\n\n\n\nPython\n\n\ndata mining\n\n\n \n\n\n\n\nMar 21, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\n  \n\n\n\n\nR basic\n\n\nAdvanced R basic\n\n\n\n\nR\n\n\nadvanced R\n\n\n \n\n\n\n\nMar 20, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\n  \n\n\n\n\nTest Post\n\n\n\n\n\n\n\ncode\n\n\n \n\n\n\n\nMar 14, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLanguage Semestics\n\n\nAdvanced Python ch02\n\n\n\n\nPython\n\n\nadvanced Python\n\n\n \n\n\n\n\nMar 10, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\n  \n\n\n\n\nManaging data with tidyverse\n\n\nOpen Data Analysis ch02\n\n\n\n\nopen data analysis\n\n\nR\n\n\n \n\n\n\n\nMar 10, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\n  \n\n\n\n\nnumpy\n\n\nData Mining basic\n\n\n\n\nPython\n\n\ndata mining\n\n\n \n\n\n\n\nMar 7, 2023\n\n\nWonjun Choi\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/Data_transformation/index.html",
    "href": "posts/Data_transformation/index.html",
    "title": "Data transformation",
    "section": "",
    "text": "library(nycflights13)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.0     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.1     ✔ tibble    3.1.8\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors"
  },
  {
    "objectID": "posts/Data_transformation/index.html#arrange-rows-with-arrange",
    "href": "posts/Data_transformation/index.html#arrange-rows-with-arrange",
    "title": "Data transformation",
    "section": "Arrange rows with arrange()",
    "text": "Arrange rows with arrange()\n\nflights %>% arrange(dep_time)\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013     1    13        1       2249      72     108    2357      71 B6     \n 2  2013     1    31        1       2100     181     124    2225     179 WN     \n 3  2013    11    13        1       2359       2     442     440       2 B6     \n 4  2013    12    16        1       2359       2     447     437      10 B6     \n 5  2013    12    20        1       2359       2     430     440     -10 B6     \n 6  2013    12    26        1       2359       2     437     440      -3 B6     \n 7  2013    12    30        1       2359       2     441     437       4 B6     \n 8  2013     2    11        1       2100     181     111    2225     166 WN     \n 9  2013     2    24        1       2245      76     121    2354      87 B6     \n10  2013     3     8        1       2355       6     431     440      -9 B6     \n# … with 336,766 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n\n결측치는 항상 하단에 정렬:\n\ndf <- tibble(x = c(5, 2, NA))\narrange(df, x)\n\n# A tibble: 3 × 1\n      x\n  <dbl>\n1     2\n2     5\n3    NA\n\narrange(df, desc(x))\n\n# A tibble: 3 × 1\n      x\n  <dbl>\n1     5\n2     2\n3    NA\n\n\n\nSelect columns with select()\n\nflights %>% select(year, month, day)\n\n# A tibble: 336,776 × 3\n    year month   day\n   <int> <int> <int>\n 1  2013     1     1\n 2  2013     1     1\n 3  2013     1     1\n 4  2013     1     1\n 5  2013     1     1\n 6  2013     1     1\n 7  2013     1     1\n 8  2013     1     1\n 9  2013     1     1\n10  2013     1     1\n# … with 336,766 more rows\n\n\n\nflights %>% select(year:day)\n\n# A tibble: 336,776 × 3\n    year month   day\n   <int> <int> <int>\n 1  2013     1     1\n 2  2013     1     1\n 3  2013     1     1\n 4  2013     1     1\n 5  2013     1     1\n 6  2013     1     1\n 7  2013     1     1\n 8  2013     1     1\n 9  2013     1     1\n10  2013     1     1\n# … with 336,766 more rows\n\n\n\nselect(flights, -(year:day))\n\n# A tibble: 336,776 × 16\n   dep_t…¹ sched…² dep_d…³ arr_t…⁴ sched…⁵ arr_d…⁶ carrier flight tailnum origin\n     <int>   <int>   <dbl>   <int>   <int>   <dbl> <chr>    <int> <chr>   <chr> \n 1     517     515       2     830     819      11 UA        1545 N14228  EWR   \n 2     533     529       4     850     830      20 UA        1714 N24211  LGA   \n 3     542     540       2     923     850      33 AA        1141 N619AA  JFK   \n 4     544     545      -1    1004    1022     -18 B6         725 N804JB  JFK   \n 5     554     600      -6     812     837     -25 DL         461 N668DN  LGA   \n 6     554     558      -4     740     728      12 UA        1696 N39463  EWR   \n 7     555     600      -5     913     854      19 B6         507 N516JB  EWR   \n 8     557     600      -3     709     723     -14 EV        5708 N829AS  LGA   \n 9     557     600      -3     838     846      -8 B6          79 N593JB  JFK   \n10     558     600      -2     753     745       8 AA         301 N3ALAA  LGA   \n# … with 336,766 more rows, 6 more variables: dest <chr>, air_time <dbl>,\n#   distance <dbl>, hour <dbl>, minute <dbl>, time_hour <dttm>, and abbreviated\n#   variable names ¹​dep_time, ²​sched_dep_time, ³​dep_delay, ⁴​arr_time,\n#   ⁵​sched_arr_time, ⁶​arr_delay\n\n\nThere are a number of helper functions you can use within select(): - starts_with(\"abc\"): matches names that begin with “abc”. - ends_with(\"time\"): matches names that end with “xyz”. - contains(\"time\"): matches names that contain “ijk”. - num_range(\"x\", 1:3): matchesx1,x2, andx3`.\n\nc(\"x1\", \"x2\", \"x3\", \"y1\", \"y2\", \"y3\", \"y4\")\n\n[1] \"x1\" \"x2\" \"x3\" \"y1\" \"y2\" \"y3\" \"y4\"\n\n\n\nflights %>% select(new_year = year)\n\n# A tibble: 336,776 × 1\n   new_year\n      <int>\n 1     2013\n 2     2013\n 3     2013\n 4     2013\n 5     2013\n 6     2013\n 7     2013\n 8     2013\n 9     2013\n10     2013\n# … with 336,766 more rows\n\nflights %>% rename(tail_num = tailnum, new_year = year)\n\n# A tibble: 336,776 × 19\n   new_year month   day dep_time sched…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n      <int> <int> <int>    <int>   <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1     2013     1     1      517     515       2     830     819      11 UA     \n 2     2013     1     1      533     529       4     850     830      20 UA     \n 3     2013     1     1      542     540       2     923     850      33 AA     \n 4     2013     1     1      544     545      -1    1004    1022     -18 B6     \n 5     2013     1     1      554     600      -6     812     837     -25 DL     \n 6     2013     1     1      554     558      -4     740     728      12 UA     \n 7     2013     1     1      555     600      -5     913     854      19 B6     \n 8     2013     1     1      557     600      -3     709     723     -14 EV     \n 9     2013     1     1      557     600      -3     838     846      -8 B6     \n10     2013     1     1      558     600      -2     753     745       8 AA     \n# … with 336,766 more rows, 9 more variables: flight <int>, tail_num <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n\n\n# 컬럼 위치 이동 (time_hour, air_time 맨 앞으로 이동)\nflights %>% select(time_hour, air_time, everything())\n\n# A tibble: 336,776 × 19\n   time_hour           air_t…¹  year month   day dep_t…² sched…³ dep_d…⁴ arr_t…⁵\n   <dttm>                <dbl> <int> <int> <int>   <int>   <int>   <dbl>   <int>\n 1 2013-01-01 05:00:00     227  2013     1     1     517     515       2     830\n 2 2013-01-01 05:00:00     227  2013     1     1     533     529       4     850\n 3 2013-01-01 05:00:00     160  2013     1     1     542     540       2     923\n 4 2013-01-01 05:00:00     183  2013     1     1     544     545      -1    1004\n 5 2013-01-01 06:00:00     116  2013     1     1     554     600      -6     812\n 6 2013-01-01 05:00:00     150  2013     1     1     554     558      -4     740\n 7 2013-01-01 06:00:00     158  2013     1     1     555     600      -5     913\n 8 2013-01-01 06:00:00      53  2013     1     1     557     600      -3     709\n 9 2013-01-01 06:00:00     140  2013     1     1     557     600      -3     838\n10 2013-01-01 06:00:00     138  2013     1     1     558     600      -2     753\n# … with 336,766 more rows, 10 more variables: sched_arr_time <int>,\n#   arr_delay <dbl>, carrier <chr>, flight <int>, tailnum <chr>, origin <chr>,\n#   dest <chr>, distance <dbl>, hour <dbl>, minute <dbl>, and abbreviated\n#   variable names ¹​air_time, ²​dep_time, ³​sched_dep_time, ⁴​dep_delay, ⁵​arr_time\n\n\n\ncontains\n\n\nflights %>% select(contains(\"time\"))\n\n# A tibble: 336,776 × 6\n   dep_time sched_dep_time arr_time sched_arr_time air_time time_hour          \n      <int>          <int>    <int>          <int>    <dbl> <dttm>             \n 1      517            515      830            819      227 2013-01-01 05:00:00\n 2      533            529      850            830      227 2013-01-01 05:00:00\n 3      542            540      923            850      160 2013-01-01 05:00:00\n 4      544            545     1004           1022      183 2013-01-01 05:00:00\n 5      554            600      812            837      116 2013-01-01 06:00:00\n 6      554            558      740            728      150 2013-01-01 05:00:00\n 7      555            600      913            854      158 2013-01-01 06:00:00\n 8      557            600      709            723       53 2013-01-01 06:00:00\n 9      557            600      838            846      140 2013-01-01 06:00:00\n10      558            600      753            745      138 2013-01-01 06:00:00\n# … with 336,766 more rows"
  },
  {
    "objectID": "posts/Data_transformation/index.html#add-new-variables-with-mutate",
    "href": "posts/Data_transformation/index.html#add-new-variables-with-mutate",
    "title": "Data transformation",
    "section": "Add new variables with mutate()",
    "text": "Add new variables with mutate()\n\n# transmute 사용\nflights %>% transmute(\n  gain = dep_delay - arr_delay,\n  hours = air_time / 60,\n  gain_per_hour = gain / hours\n)\n\n# A tibble: 336,776 × 3\n    gain hours gain_per_hour\n   <dbl> <dbl>         <dbl>\n 1    -9 3.78          -2.38\n 2   -16 3.78          -4.23\n 3   -31 2.67         -11.6 \n 4    17 3.05           5.57\n 5    19 1.93           9.83\n 6   -16 2.5           -6.4 \n 7   -24 2.63          -9.11\n 8    11 0.883         12.5 \n 9     5 2.33           2.14\n10   -10 2.3           -4.35\n# … with 336,766 more rows\n\n# mutate & select 사용\nflights %>%\n  mutate(\n    gain = dep_delay - arr_delay,\n    hours = air_time / 60,\n    gain_per_hour = gain / hours\n  ) %>%\n  select(gain, hour, gain_per_hour)\n\n# A tibble: 336,776 × 3\n    gain  hour gain_per_hour\n   <dbl> <dbl>         <dbl>\n 1    -9     5         -2.38\n 2   -16     5         -4.23\n 3   -31     5        -11.6 \n 4    17     5          5.57\n 5    19     6          9.83\n 6   -16     5         -6.4 \n 7   -24     6         -9.11\n 8    11     6         12.5 \n 9     5     6          2.14\n10   -10     6         -4.35\n# … with 336,766 more rows\n\n# 새로운 컬럼을 원하는 위치에 생성\nflights %>%\n  mutate(\n    gain = dep_delay - arr_delay,\n    hours = air_time / 60,\n    gain_per_hour = gain / hours,\n    .after = year\n  )\n\n# A tibble: 336,776 × 22\n    year  gain hours gain_…¹ month   day dep_t…² sched…³ dep_d…⁴ arr_t…⁵ sched…⁶\n   <int> <dbl> <dbl>   <dbl> <int> <int>   <int>   <int>   <dbl>   <int>   <int>\n 1  2013    -9 3.78    -2.38     1     1     517     515       2     830     819\n 2  2013   -16 3.78    -4.23     1     1     533     529       4     850     830\n 3  2013   -31 2.67   -11.6      1     1     542     540       2     923     850\n 4  2013    17 3.05     5.57     1     1     544     545      -1    1004    1022\n 5  2013    19 1.93     9.83     1     1     554     600      -6     812     837\n 6  2013   -16 2.5     -6.4      1     1     554     558      -4     740     728\n 7  2013   -24 2.63    -9.11     1     1     555     600      -5     913     854\n 8  2013    11 0.883   12.5      1     1     557     600      -3     709     723\n 9  2013     5 2.33     2.14     1     1     557     600      -3     838     846\n10  2013   -10 2.3     -4.35     1     1     558     600      -2     753     745\n# … with 336,766 more rows, 11 more variables: arr_delay <dbl>, carrier <chr>,\n#   flight <int>, tailnum <chr>, origin <chr>, dest <chr>, air_time <dbl>,\n#   distance <dbl>, hour <dbl>, minute <dbl>, time_hour <dttm>, and abbreviated\n#   variable names ¹​gain_per_hour, ²​dep_time, ³​sched_dep_time, ⁴​dep_delay,\n#   ⁵​arr_time, ⁶​sched_arr_time\n\n\n\nUseful creation functions\n\ntransmute(flights,\n          dep_time,\n          hour = dep_time %/% 100,\n          minute = dep_time %% 100)\n\n# A tibble: 336,776 × 3\n   dep_time  hour minute\n      <int> <dbl>  <dbl>\n 1      517     5     17\n 2      533     5     33\n 3      542     5     42\n 4      544     5     44\n 5      554     5     54\n 6      554     5     54\n 7      555     5     55\n 8      557     5     57\n 9      557     5     57\n10      558     5     58\n# … with 336,766 more rows\n\n\n\n\nMissing values\n\nflights %>% \n  group_by(year, month, day) %>% \n  summarise(mean = mean(dep_delay))\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 365 × 4\n# Groups:   year, month [12]\n    year month   day  mean\n   <int> <int> <int> <dbl>\n 1  2013     1     1    NA\n 2  2013     1     2    NA\n 3  2013     1     3    NA\n 4  2013     1     4    NA\n 5  2013     1     5    NA\n 6  2013     1     6    NA\n 7  2013     1     7    NA\n 8  2013     1     8    NA\n 9  2013     1     9    NA\n10  2013     1    10    NA\n# … with 355 more rows\n\n\n\nflights %>% \n  group_by(year, month, day) %>% \n  summarise(mean = mean(dep_delay), na.rm = TRUE)\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 365 × 5\n# Groups:   year, month [12]\n    year month   day  mean na.rm\n   <int> <int> <int> <dbl> <lgl>\n 1  2013     1     1    NA TRUE \n 2  2013     1     2    NA TRUE \n 3  2013     1     3    NA TRUE \n 4  2013     1     4    NA TRUE \n 5  2013     1     5    NA TRUE \n 6  2013     1     6    NA TRUE \n 7  2013     1     7    NA TRUE \n 8  2013     1     8    NA TRUE \n 9  2013     1     9    NA TRUE \n10  2013     1    10    NA TRUE \n# … with 355 more rows\n\n\n\n# filter & is.na 사용용\nnot_cancelled <- flights %>% \n  filter(!is.na(dep_delay), !is.na(arr_delay))\n\n# drop_na 사용\nnot_cancelled_drop <- flights %>% \n  drop_na(dep_delay, arr_delay)\n\nnot_cancelled %>% \n  group_by(year, month, day) %>% \n  summarise(mean = mean(dep_delay))\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 365 × 4\n# Groups:   year, month [12]\n    year month   day  mean\n   <int> <int> <int> <dbl>\n 1  2013     1     1 11.4 \n 2  2013     1     2 13.7 \n 3  2013     1     3 10.9 \n 4  2013     1     4  8.97\n 5  2013     1     5  5.73\n 6  2013     1     6  7.15\n 7  2013     1     7  5.42\n 8  2013     1     8  2.56\n 9  2013     1     9  2.30\n10  2013     1    10  2.84\n# … with 355 more rows\n\n\n\n\nGrouping by multiple variables\n\ndaily <- flights %>% group_by(year, month, day)\nflights\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013     1     1      517        515       2     830     819      11 UA     \n 2  2013     1     1      533        529       4     850     830      20 UA     \n 3  2013     1     1      542        540       2     923     850      33 AA     \n 4  2013     1     1      544        545      -1    1004    1022     -18 B6     \n 5  2013     1     1      554        600      -6     812     837     -25 DL     \n 6  2013     1     1      554        558      -4     740     728      12 UA     \n 7  2013     1     1      555        600      -5     913     854      19 B6     \n 8  2013     1     1      557        600      -3     709     723     -14 EV     \n 9  2013     1     1      557        600      -3     838     846      -8 B6     \n10  2013     1     1      558        600      -2     753     745       8 AA     \n# … with 336,766 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\ndaily\n\n# A tibble: 336,776 × 19\n# Groups:   year, month, day [365]\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013     1     1      517        515       2     830     819      11 UA     \n 2  2013     1     1      533        529       4     850     830      20 UA     \n 3  2013     1     1      542        540       2     923     850      33 AA     \n 4  2013     1     1      544        545      -1    1004    1022     -18 B6     \n 5  2013     1     1      554        600      -6     812     837     -25 DL     \n 6  2013     1     1      554        558      -4     740     728      12 UA     \n 7  2013     1     1      555        600      -5     913     854      19 B6     \n 8  2013     1     1      557        600      -3     709     723     -14 EV     \n 9  2013     1     1      557        600      -3     838     846      -8 B6     \n10  2013     1     1      558        600      -2     753     745       8 AA     \n# … with 336,766 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n(per_day   <- daily %>% summarise(flights = n()))\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 365 × 4\n# Groups:   year, month [12]\n    year month   day flights\n   <int> <int> <int>   <int>\n 1  2013     1     1     842\n 2  2013     1     2     943\n 3  2013     1     3     914\n 4  2013     1     4     915\n 5  2013     1     5     720\n 6  2013     1     6     832\n 7  2013     1     7     933\n 8  2013     1     8     899\n 9  2013     1     9     902\n10  2013     1    10     932\n# … with 355 more rows\n\n(per_month <- per_day %>% summarise(flights = sum(flights)))\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 12 × 3\n# Groups:   year [1]\n    year month flights\n   <int> <int>   <int>\n 1  2013     1   27004\n 2  2013     2   24951\n 3  2013     3   28834\n 4  2013     4   28330\n 5  2013     5   28796\n 6  2013     6   28243\n 7  2013     7   29425\n 8  2013     8   29327\n 9  2013     9   27574\n10  2013    10   28889\n11  2013    11   27268\n12  2013    12   28135\n\n(per_year  <- per_month %>% summarise(flights = sum(flights)))\n\n# A tibble: 1 × 2\n   year flights\n  <int>   <int>\n1  2013  336776\n\n\n\n\nUngrouping\n\ndaily %>% \n  ungroup() %>% \n  summarise(flights = n())\n\n# A tibble: 1 × 1\n  flights\n    <int>\n1  336776"
  },
  {
    "objectID": "posts/Data_transformation/index.html#grouped-mutates-and-filters",
    "href": "posts/Data_transformation/index.html#grouped-mutates-and-filters",
    "title": "Data transformation",
    "section": "Grouped mutates (and filters)",
    "text": "Grouped mutates (and filters)\n\nFind the worst members of each group\n년/월/일자별 가장 arr_delay가 높은 10개 비행 추출\n\n\nflights %>%\n  group_by(year, month, day) %>%\n  filter(rank(desc(arr_delay)) < 11) %>%\n  select(year, month, day, arr_delay) %>%\n  arrange(year, month, day, desc(arr_delay))\n\n# A tibble: 3,691 × 4\n# Groups:   year, month, day [365]\n    year month   day arr_delay\n   <int> <int> <int>     <dbl>\n 1  2013     1     1       851\n 2  2013     1     1       456\n 3  2013     1     1       338\n 4  2013     1     1       263\n 5  2013     1     1       250\n 6  2013     1     1       246\n 7  2013     1     1       222\n 8  2013     1     1       191\n 9  2013     1     1       174\n10  2013     1     1       166\n# … with 3,681 more rows\n\n# slice_max, slice_min 활용\nflights %>% \n  group_by(year, month, day) %>% \n  slice_max(arr_delay, n = 10) %>% \n  select(year, month, day, arr_delay)\n\n# A tibble: 3,697 × 4\n# Groups:   year, month, day [365]\n    year month   day arr_delay\n   <int> <int> <int>     <dbl>\n 1  2013     1     1       851\n 2  2013     1     1       456\n 3  2013     1     1       338\n 4  2013     1     1       263\n 5  2013     1     1       250\n 6  2013     1     1       246\n 7  2013     1     1       222\n 8  2013     1     1       191\n 9  2013     1     1       174\n10  2013     1     1       166\n# … with 3,687 more rows\n\n# Quiz: 연도와 월별로 arr_delay가 가장 큰 3개 날짜 추출\nflights %>% \n  group_by(year, month) %>% \n  slice_max(arr_delay, n = 3) %>% \n  select(year, month, day, arr_delay)\n\n# A tibble: 37 × 4\n# Groups:   year, month [12]\n    year month   day arr_delay\n   <int> <int> <int>     <dbl>\n 1  2013     1     9      1272\n 2  2013     1    10      1109\n 3  2013     1     1       851\n 4  2013     2    10       834\n 5  2013     2    24       773\n 6  2013     2    19       767\n 7  2013     3    17       915\n 8  2013     3    18       784\n 9  2013     3    18       506\n10  2013     4    10       931\n# … with 27 more rows\n\n\n\ndest(도착공항) 그룹화 후 10000대 이상 착륙한 공항 비행정보 추출\n\n\npopular_dests <- flights %>% \n  group_by(dest) %>% \n  filter(n() > 10000)\n\nunique(flights$dest)\n\n  [1] \"IAH\" \"MIA\" \"BQN\" \"ATL\" \"ORD\" \"FLL\" \"IAD\" \"MCO\" \"PBI\" \"TPA\" \"LAX\" \"SFO\"\n [13] \"DFW\" \"BOS\" \"LAS\" \"MSP\" \"DTW\" \"RSW\" \"SJU\" \"PHX\" \"BWI\" \"CLT\" \"BUF\" \"DEN\"\n [25] \"SNA\" \"MSY\" \"SLC\" \"XNA\" \"MKE\" \"SEA\" \"ROC\" \"SYR\" \"SRQ\" \"RDU\" \"CMH\" \"JAX\"\n [37] \"CHS\" \"MEM\" \"PIT\" \"SAN\" \"DCA\" \"CLE\" \"STL\" \"MYR\" \"JAC\" \"MDW\" \"HNL\" \"BNA\"\n [49] \"AUS\" \"BTV\" \"PHL\" \"STT\" \"EGE\" \"AVL\" \"PWM\" \"IND\" \"SAV\" \"CAK\" \"HOU\" \"LGB\"\n [61] \"DAY\" \"ALB\" \"BDL\" \"MHT\" \"MSN\" \"GSO\" \"CVG\" \"BUR\" \"RIC\" \"GSP\" \"GRR\" \"MCI\"\n [73] \"ORF\" \"SAT\" \"SDF\" \"PDX\" \"SJC\" \"OMA\" \"CRW\" \"OAK\" \"SMF\" \"TUL\" \"TYS\" \"OKC\"\n [85] \"PVD\" \"DSM\" \"PSE\" \"BHM\" \"CAE\" \"HDN\" \"BZN\" \"MTJ\" \"EYW\" \"PSP\" \"ACK\" \"BGR\"\n [97] \"ABQ\" \"ILM\" \"MVY\" \"SBN\" \"LEX\" \"CHO\" \"TVC\" \"ANC\" \"LGA\"\n\nunique(popular_dests$dest)\n\n[1] \"MIA\" \"ATL\" \"ORD\" \"FLL\" \"MCO\" \"LAX\" \"SFO\" \"BOS\" \"CLT\"\n\nflights %>% \n  group_by(dest) %>% \n  summarise(count = n()) %>% \n  filter(count > 10000)\n\n# A tibble: 9 × 2\n  dest  count\n  <chr> <int>\n1 ATL   17215\n2 BOS   15508\n3 CLT   14064\n4 FLL   12055\n5 LAX   16174\n6 MCO   14082\n7 MIA   11728\n8 ORD   17283\n9 SFO   13331\n\n\n\nStandardize to compute per group metrics:\n\n\ntmp <- popular_dests %>% \n  group_by(month) %>% \n  filter(arr_delay > 0) %>% \n  mutate(prop_delay = arr_delay / sum(arr_delay)) %>% \n  select(year:day, dest, arr_delay, prop_delay)\n\ntmp\n\n# A tibble: 50,245 × 6\n# Groups:   month [12]\n    year month   day dest  arr_delay prop_delay\n   <int> <int> <int> <chr>     <dbl>      <dbl>\n 1  2013     1     1 MIA          33  0.000299 \n 2  2013     1     1 ORD          12  0.000109 \n 3  2013     1     1 FLL          19  0.000172 \n 4  2013     1     1 ORD           8  0.0000726\n 5  2013     1     1 LAX           7  0.0000635\n 6  2013     1     1 ATL          12  0.000109 \n 7  2013     1     1 ORD          32  0.000290 \n 8  2013     1     1 SFO          14  0.000127 \n 9  2013     1     1 MIA           5  0.0000454\n10  2013     1     1 LAX          29  0.000263 \n# … with 50,235 more rows\n\n\n\nexample\n\n\ngrade <- tibble(name = c(\"Paul\", \"James\", \"Durant\", \"Harden\", \"Jordan\"),\n                region = c(\"West\", \"West\", \"East\", \"East\", \"East\"),\n                score = c(95, 91, 87, 89, 100))\n\n# Group_by 하지 않았을 때\nscore_proportion <- grade %>% \n  mutate(prop_score = score / sum(score))\n\nscore_proportion\n\n# A tibble: 5 × 4\n  name   region score prop_score\n  <chr>  <chr>  <dbl>      <dbl>\n1 Paul   West      95      0.206\n2 James  West      91      0.197\n3 Durant East      87      0.188\n4 Harden East      89      0.193\n5 Jordan East     100      0.216\n\nsum(score_proportion$prop_score)\n\n[1] 1\n\n# region별 Group\nscore_proportion_region <- grade %>% \n  group_by(region) %>% \n  mutate(prop_score = score / sum(score))\n\nscore_proportion_region\n\n# A tibble: 5 × 4\n# Groups:   region [2]\n  name   region score prop_score\n  <chr>  <chr>  <dbl>      <dbl>\n1 Paul   West      95      0.511\n2 James  West      91      0.489\n3 Durant East      87      0.315\n4 Harden East      89      0.322\n5 Jordan East     100      0.362\n\nsum(score_proportion_region$prop_score)\n\n[1] 2"
  },
  {
    "objectID": "posts/Managing_data_with_tidyverse/index.html",
    "href": "posts/Managing_data_with_tidyverse/index.html",
    "title": "Managing data with tidyverse",
    "section": "",
    "text": "RStudio가 개발, 관리하는 패키지\n공식 문서가 매우 잘 되어 있음: https://www.tidyverse.org/\n사용자층이 두터워 영어로 검색하면 많은 질답을 찾을 수 있음\n6개의 핵심 패키지 포함 23가지 패키지로 이루어진 메타 패키지\n\n\n#install.packages(\"tidyverse\")\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.0     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.1     ✔ tibble    3.1.8\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n\n\n\n코드가 길어지면 이해하기 어려운 한계가 존재\n\nrnorm 평균이 10이고 표준편차가 1인 정규분포에서 데이터 10000개 생성\nsample 데이터 10000개 중 100개 샘플링\nlog 로그\ndiff 차분\nplot 그래프화\n\n\n\nplot(diff(log(sample(rnorm(10000,  mean = 10, sd = 1), \n                     size = 100, \n                     replace = FALSE))), \n     col = \"red\", \n     type = \"l\")"
  },
  {
    "objectID": "posts/Managing_data_with_tidyverse/index.html#파이프-연산자를-통한-코드의-직관화",
    "href": "posts/Managing_data_with_tidyverse/index.html#파이프-연산자를-통한-코드의-직관화",
    "title": "Managing data with tidyverse",
    "section": "2. 파이프 연산자(%>%)를 통한 코드의 직관화",
    "text": "2. 파이프 연산자(%>%)를 통한 코드의 직관화\n\nCtrl + Shift + M\n순차적 흐름으로 코드를 이해할 수 있음\n중간 변수들을 계속해서 Object로 할당할 필요가 없음\n\n\nrnorm(10000, mean = 10, sd = 1) %>%\n  sample(size = 100, replace = FALSE) %>%\n  log() %>%\n  diff() %>%\n  plot(col = \"red\", type = \"l\")\n\n\n\n\n\nFlight 데이터의 파이프 연산자 예시\n\n사용할 데이터셋은 뉴욕시에서 2013년에 출발한 336,776개의 모든 항공편이 포함된 데이터 (nycflights13 패키지의 flights 데이터셋)\n\n\n# install.packages(\"nycflights13\")\nlibrary(nycflights13)\n\nnrow(flights) # 행의 수\n\n[1] 336776\n\nhead(flights)\n\n# A tibble: 6 × 19\n   year month   day dep_time sched_dep…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n  <int> <int> <int>    <int>       <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n1  2013     1     1      517         515       2     830     819      11 UA     \n2  2013     1     1      533         529       4     850     830      20 UA     \n3  2013     1     1      542         540       2     923     850      33 AA     \n4  2013     1     1      544         545      -1    1004    1022     -18 B6     \n5  2013     1     1      554         600      -6     812     837     -25 DL     \n6  2013     1     1      554         558      -4     740     728      12 UA     \n# … with 9 more variables: flight <int>, tailnum <chr>, origin <chr>,\n#   dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>, minute <dbl>,\n#   time_hour <dttm>, and abbreviated variable names ¹​sched_dep_time,\n#   ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n\n\nflights data를 선택 후, group_by 한 후, summarise를 수행\n각 function의 기능이 무엇인지 몰라도 대략적인 흐름 파악 가능\n\n\nflights %>% \n  group_by(year, month, day) %>% \n  summarise(delay = mean(dep_delay), na.rm = TRUE)\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 365 × 5\n# Groups:   year, month [12]\n    year month   day delay na.rm\n   <int> <int> <int> <dbl> <lgl>\n 1  2013     1     1    NA TRUE \n 2  2013     1     2    NA TRUE \n 3  2013     1     3    NA TRUE \n 4  2013     1     4    NA TRUE \n 5  2013     1     5    NA TRUE \n 6  2013     1     6    NA TRUE \n 7  2013     1     7    NA TRUE \n 8  2013     1     8    NA TRUE \n 9  2013     1     9    NA TRUE \n10  2013     1    10    NA TRUE \n# … with 355 more rows\n\nmean_delay_by_day <- flights %>% \n  group_by(year, month, day) %>% # 연도, 월, 일자에 대해서 group\n  summarise(delay = mean(dep_delay), na.rm = TRUE) %>% \n  arrange(desc(delay))\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument."
  },
  {
    "objectID": "posts/Managing_data_with_tidyverse/index.html#dplyr-패키지에-포함된-유용한-명령어들",
    "href": "posts/Managing_data_with_tidyverse/index.html#dplyr-패키지에-포함된-유용한-명령어들",
    "title": "Managing data with tidyverse",
    "section": "4. dplyr 패키지에 포함된 유용한 명령어들",
    "text": "4. dplyr 패키지에 포함된 유용한 명령어들\n\n4-1 select() : 열 방향 선택\n\n데이터에서 특정 컬럼을 선택하고 싶을 때 사용\n선언된 순서대로 컬럼을 정렬\n\n\nflights %>% select(year, month, day)\n\n# A tibble: 336,776 × 3\n    year month   day\n   <int> <int> <int>\n 1  2013     1     1\n 2  2013     1     1\n 3  2013     1     1\n 4  2013     1     1\n 5  2013     1     1\n 6  2013     1     1\n 7  2013     1     1\n 8  2013     1     1\n 9  2013     1     1\n10  2013     1     1\n# … with 336,766 more rows\n\n# 컬럼에 띄어쓰기가 존재할 때\nflights$`not use` <- 0\n\n# 컬럼 이름에 되도록 띄어쓰기 사용 X\nflights %>%  select(`not use`)\n\n# A tibble: 336,776 × 1\n   `not use`\n       <dbl>\n 1         0\n 2         0\n 3         0\n 4         0\n 5         0\n 6         0\n 7         0\n 8         0\n 9         0\n10         0\n# … with 336,766 more rows\n\n# 해당 컬럼 삭제\nflights$`not use` <- NULL\n\n\n\n4-2 mutate() : 새로운 컬럼을 만들거나 계산하고 싶을 때\n\n편의성을 위해 일부 데이터만 추출\n\n\nflight_sample <- flights %>% select(year:day, ends_with(\"delay\"), distance, air_time)\nflight_sample\n\n# A tibble: 336,776 × 7\n    year month   day dep_delay arr_delay distance air_time\n   <int> <int> <int>     <dbl>     <dbl>    <dbl>    <dbl>\n 1  2013     1     1         2        11     1400      227\n 2  2013     1     1         4        20     1416      227\n 3  2013     1     1         2        33     1089      160\n 4  2013     1     1        -1       -18     1576      183\n 5  2013     1     1        -6       -25      762      116\n 6  2013     1     1        -4        12      719      150\n 7  2013     1     1        -5        19     1065      158\n 8  2013     1     1        -3       -14      229       53\n 9  2013     1     1        -3        -8      944      140\n10  2013     1     1        -2         8      733      138\n# … with 336,766 more rows\n\n\n\n각 컬럼간의 계산으로 새로운 열(Column)을 만듬\n\n\nflight_sample$net_delay <-\n  flight_sample$arr_delay - flight_sample$dep_delay\n\nflight_sample$speed <- flight_sample$distance/flight_sample$air_time*60\n\n# mutate 사용하여 구현\nflight_sample %>% mutate(net_delay = arr_delay - dep_delay,\n                         speed = distance/air_time*60)\n\n# A tibble: 336,776 × 9\n    year month   day dep_delay arr_delay distance air_time net_delay speed\n   <int> <int> <int>     <dbl>     <dbl>    <dbl>    <dbl>     <dbl> <dbl>\n 1  2013     1     1         2        11     1400      227         9  370.\n 2  2013     1     1         4        20     1416      227        16  374.\n 3  2013     1     1         2        33     1089      160        31  408.\n 4  2013     1     1        -1       -18     1576      183       -17  517.\n 5  2013     1     1        -6       -25      762      116       -19  394.\n 6  2013     1     1        -4        12      719      150        16  288.\n 7  2013     1     1        -5        19     1065      158        24  404.\n 8  2013     1     1        -3       -14      229       53       -11  259.\n 9  2013     1     1        -3        -8      944      140        -5  405.\n10  2013     1     1        -2         8      733      138        10  319.\n# … with 336,766 more rows\n\n\n\n\n4-3 filter() : 행방향으로 조건을 설정\n\n데이터 중에 조건에 해당하는 일부 데이터만 필터해서 사용\n논리연산자와 결합하여 많이 사용\n논리연산자에 대한 자세한 내용은 링크 참조\n\n\na <- c(10, 20, 30, 40, 50)\nb <- 30\n\n# 논리 연산자\na == b\n\n[1] FALSE FALSE  TRUE FALSE FALSE\n\na > b\n\n[1] FALSE FALSE FALSE  TRUE  TRUE\n\n# 숫자를 사용한 인덱싱\na[1]\n\n[1] 10\n\na[3]\n\n[1] 30\n\na[c(1, 3)]\n\n[1] 10 30\n\n# 논리연산자를 사용한 인덱싱\na[a>b]\n\n[1] 40 50\n\na[c(4, 5)]\n\n[1] 40 50\n\n\n\n\n\n연산자\n설명\n\n\n\n\na < b\na가 b보다 작다\n\n\na <= b\na가 b보다 작거나 같다\n\n\na == b\na와 b가 같다\n\n\na != b\na와 b가 같지 않다\n\n\n!x\nx가 아니다\n\n\nx | y\nx이거나 y이다\n\n\nx & y\nx이고 y이다\n\n\nisTRUE(x)\nx가 TRUE이다\n\n\n\n\nflights %>% filter(month==1) # 1월 데이터만 추출\n\n# A tibble: 27,004 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013     1     1      517        515       2     830     819      11 UA     \n 2  2013     1     1      533        529       4     850     830      20 UA     \n 3  2013     1     1      542        540       2     923     850      33 AA     \n 4  2013     1     1      544        545      -1    1004    1022     -18 B6     \n 5  2013     1     1      554        600      -6     812     837     -25 DL     \n 6  2013     1     1      554        558      -4     740     728      12 UA     \n 7  2013     1     1      555        600      -5     913     854      19 B6     \n 8  2013     1     1      557        600      -3     709     723     -14 EV     \n 9  2013     1     1      557        600      -3     838     846      -8 B6     \n10  2013     1     1      558        600      -2     753     745       8 AA     \n# … with 26,994 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\nflights %>% filter(month==12, day == 1) # 12월 1일 데이터만 추출\n\n# A tibble: 987 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013    12     1       13       2359      14     446     445       1 B6     \n 2  2013    12     1       17       2359      18     443     437       6 B6     \n 3  2013    12     1      453        500      -7     636     651     -15 US     \n 4  2013    12     1      520        515       5     749     808     -19 UA     \n 5  2013    12     1      536        540      -4     845     850      -5 AA     \n 6  2013    12     1      540        550     -10    1005    1027     -22 B6     \n 7  2013    12     1      541        545      -4     734     755     -21 EV     \n 8  2013    12     1      546        545       1     826     835      -9 UA     \n 9  2013    12     1      549        600     -11     648     659     -11 US     \n10  2013    12     1      550        600     -10     825     854     -29 B6     \n# … with 977 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n\n\n\n4-4 bind_rows()\n\n두 데이터를 행방향으로 묶음\n데이터를 아래로 붙임\n\nfilter()를 사용한 subset 추출\n\njan <- flights %>% filter(month == 1)\nfeb <- flights %>% filter(month == 2)\njanfeb <- bind_rows(jan, feb) # 1번 방법\njanfeb <- jan %>% bind_rows(feb) # 2번 방법\nflights %>% filter(month %in% c(1,2))\n\n# A tibble: 51,955 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013     1     1      517        515       2     830     819      11 UA     \n 2  2013     1     1      533        529       4     850     830      20 UA     \n 3  2013     1     1      542        540       2     923     850      33 AA     \n 4  2013     1     1      544        545      -1    1004    1022     -18 B6     \n 5  2013     1     1      554        600      -6     812     837     -25 DL     \n 6  2013     1     1      554        558      -4     740     728      12 UA     \n 7  2013     1     1      555        600      -5     913     854      19 B6     \n 8  2013     1     1      557        600      -3     709     723     -14 EV     \n 9  2013     1     1      557        600      -3     838     846      -8 B6     \n10  2013     1     1      558        600      -2     753     745       8 AA     \n# … with 51,945 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n\n\n\n4-5 arrange() : 데이터 정렬\n\n지정되는 컬럼 기준으로 오름차순 정렬\n\n\n# 오름차순 정렬\nflights %>% arrange(dep_delay)\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013    12     7     2040       2123     -43      40    2352      48 B6     \n 2  2013     2     3     2022       2055     -33    2240    2338     -58 DL     \n 3  2013    11    10     1408       1440     -32    1549    1559     -10 EV     \n 4  2013     1    11     1900       1930     -30    2233    2243     -10 DL     \n 5  2013     1    29     1703       1730     -27    1947    1957     -10 F9     \n 6  2013     8     9      729        755     -26    1002     955       7 MQ     \n 7  2013    10    23     1907       1932     -25    2143    2143       0 EV     \n 8  2013     3    30     2030       2055     -25    2213    2250     -37 MQ     \n 9  2013     3     2     1431       1455     -24    1601    1631     -30 9E     \n10  2013     5     5      934        958     -24    1225    1309     -44 B6     \n# … with 336,766 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n# 내림차순 정렬\nflights %>% arrange(-dep_delay)\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier\n   <int> <int> <int>    <int>      <int>   <dbl>   <int>   <int>   <dbl> <chr>  \n 1  2013     1     9      641        900    1301    1242    1530    1272 HA     \n 2  2013     6    15     1432       1935    1137    1607    2120    1127 MQ     \n 3  2013     1    10     1121       1635    1126    1239    1810    1109 MQ     \n 4  2013     9    20     1139       1845    1014    1457    2210    1007 AA     \n 5  2013     7    22      845       1600    1005    1044    1815     989 MQ     \n 6  2013     4    10     1100       1900     960    1342    2211     931 DL     \n 7  2013     3    17     2321        810     911     135    1020     915 DL     \n 8  2013     6    27      959       1900     899    1236    2226     850 DL     \n 9  2013     7    22     2257        759     898     121    1026     895 DL     \n10  2013    12     5      756       1700     896    1058    2020     878 AA     \n# … with 336,766 more rows, 9 more variables: flight <int>, tailnum <chr>,\n#   origin <chr>, dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>,\n#   minute <dbl>, time_hour <dttm>, and abbreviated variable names\n#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay\n\n\n\n\n4-6 group_by() & summarise() : 그룹별로 계산을 수행\n\n그룹별로 통계치를 뽑거나 특정 계산을 수행하고 싶은 경우\n\n\n# Group을 하지 않았을 때\nflights %>% \n  summarise(mean_dep_delay = mean(dep_delay, na.rm = T),\n            count = n())\n\n# A tibble: 1 × 2\n  mean_dep_delay  count\n           <dbl>  <int>\n1           12.6 336776\n\nflights %>% \n  group_by(month) %>% \n  summarise(mean_dep_delay = mean(dep_delay, na.rm = T),\n            count = n())\n\n# A tibble: 12 × 3\n   month mean_dep_delay count\n   <int>          <dbl> <int>\n 1     1          10.0  27004\n 2     2          10.8  24951\n 3     3          13.2  28834\n 4     4          13.9  28330\n 5     5          13.0  28796\n 6     6          20.8  28243\n 7     7          21.7  29425\n 8     8          12.6  29327\n 9     9           6.72 27574\n10    10           6.24 28889\n11    11           5.44 27268\n12    12          16.6  28135\n\n# 월마다 가장 연착이 긴 시간을 뽑아보기\nflights %>% \n  group_by(month) %>% \n  summarise(count = n(),\n            mean_dep_delay = mean(dep_delay, na.rm = T),\n            max_dep_delay = max(dep_delay, na.rm = T))\n\n# A tibble: 12 × 4\n   month count mean_dep_delay max_dep_delay\n   <int> <int>          <dbl>         <dbl>\n 1     1 27004          10.0           1301\n 2     2 24951          10.8            853\n 3     3 28834          13.2            911\n 4     4 28330          13.9            960\n 5     5 28796          13.0            878\n 6     6 28243          20.8           1137\n 7     7 29425          21.7           1005\n 8     8 29327          12.6            520\n 9     9 27574           6.72          1014\n10    10 28889           6.24           702\n11    11 27268           5.44           798\n12    12 28135          16.6            896\n\n# 월마다 가장 연착이 많이된 비행기는 해당 월의 평균보다 몇배가 높나요?\na <- flights %>% \n  group_by(month) %>% \n  summarise(count = n(),\n            mean_dep_delay = mean(dep_delay, na.rm = T),\n            max_dep_delay = max(dep_delay, na.rm = T))\n            \na %>% mutate(max_dep_delay_ratio = max_dep_delay / mean_dep_delay)\n\n# A tibble: 12 × 5\n   month count mean_dep_delay max_dep_delay max_dep_delay_ratio\n   <int> <int>          <dbl>         <dbl>               <dbl>\n 1     1 27004          10.0           1301               130. \n 2     2 24951          10.8            853                78.9\n 3     3 28834          13.2            911                68.9\n 4     4 28330          13.9            960                68.9\n 5     5 28796          13.0            878                67.6\n 6     6 28243          20.8           1137                54.5\n 7     7 29425          21.7           1005                46.3\n 8     8 29327          12.6            520                41.2\n 9     9 27574           6.72          1014               151. \n10    10 28889           6.24           702               112. \n11    11 27268           5.44           798               147. \n12    12 28135          16.6            896                54.1\n\n\n\n\n4-7 left_join()\n\n# 특정 컬럼만 추출\nflight_sample <- flights %>% select(year:day, origin, carrier)\nflight_sample\n\n# A tibble: 336,776 × 5\n    year month   day origin carrier\n   <int> <int> <int> <chr>  <chr>  \n 1  2013     1     1 EWR    UA     \n 2  2013     1     1 LGA    UA     \n 3  2013     1     1 JFK    AA     \n 4  2013     1     1 JFK    B6     \n 5  2013     1     1 LGA    DL     \n 6  2013     1     1 EWR    UA     \n 7  2013     1     1 EWR    B6     \n 8  2013     1     1 LGA    EV     \n 9  2013     1     1 JFK    B6     \n10  2013     1     1 LGA    AA     \n# … with 336,766 more rows\n\n\n\n# 항공사 이름\nairlines\n\n# A tibble: 16 × 2\n   carrier name                       \n   <chr>   <chr>                      \n 1 9E      Endeavor Air Inc.          \n 2 AA      American Airlines Inc.     \n 3 AS      Alaska Airlines Inc.       \n 4 B6      JetBlue Airways            \n 5 DL      Delta Air Lines Inc.       \n 6 EV      ExpressJet Airlines Inc.   \n 7 F9      Frontier Airlines Inc.     \n 8 FL      AirTran Airways Corporation\n 9 HA      Hawaiian Airlines Inc.     \n10 MQ      Envoy Air                  \n11 OO      SkyWest Airlines Inc.      \n12 UA      United Air Lines Inc.      \n13 US      US Airways Inc.            \n14 VX      Virgin America             \n15 WN      Southwest Airlines Co.     \n16 YV      Mesa Airlines Inc.         \n\n\n\n두 데이터를 특정한 key value를 기준으로 좌우로 붙이고 싶을 때 left_join()을 사용\n\n\nflight_sample %>% left_join(airlines, by = \"carrier\")\n\n# A tibble: 336,776 × 6\n    year month   day origin carrier name                    \n   <int> <int> <int> <chr>  <chr>   <chr>                   \n 1  2013     1     1 EWR    UA      United Air Lines Inc.   \n 2  2013     1     1 LGA    UA      United Air Lines Inc.   \n 3  2013     1     1 JFK    AA      American Airlines Inc.  \n 4  2013     1     1 JFK    B6      JetBlue Airways         \n 5  2013     1     1 LGA    DL      Delta Air Lines Inc.    \n 6  2013     1     1 EWR    UA      United Air Lines Inc.   \n 7  2013     1     1 EWR    B6      JetBlue Airways         \n 8  2013     1     1 LGA    EV      ExpressJet Airlines Inc.\n 9  2013     1     1 JFK    B6      JetBlue Airways         \n10  2013     1     1 LGA    AA      American Airlines Inc.  \n# … with 336,766 more rows\n\n\n\nKey 값의 컬럼 이름이 다를 경우\n\n\ncolnames(airlines)[1] <- \"company_name\"\n\nflight_sample %>% left_join(airlines, by = c(\"carrier\" = \"company_name\"))\n\n# A tibble: 336,776 × 6\n    year month   day origin carrier name                    \n   <int> <int> <int> <chr>  <chr>   <chr>                   \n 1  2013     1     1 EWR    UA      United Air Lines Inc.   \n 2  2013     1     1 LGA    UA      United Air Lines Inc.   \n 3  2013     1     1 JFK    AA      American Airlines Inc.  \n 4  2013     1     1 JFK    B6      JetBlue Airways         \n 5  2013     1     1 LGA    DL      Delta Air Lines Inc.    \n 6  2013     1     1 EWR    UA      United Air Lines Inc.   \n 7  2013     1     1 EWR    B6      JetBlue Airways         \n 8  2013     1     1 LGA    EV      ExpressJet Airlines Inc.\n 9  2013     1     1 JFK    B6      JetBlue Airways         \n10  2013     1     1 LGA    AA      American Airlines Inc.  \n# … with 336,766 more rows"
  },
  {
    "objectID": "posts/Numpy/index.html",
    "href": "posts/Numpy/index.html",
    "title": "numpy",
    "section": "",
    "text": "numpy"
  },
  {
    "objectID": "posts/Pandas/index.html",
    "href": "posts/Pandas/index.html",
    "title": "pandas",
    "section": "",
    "text": "pandas"
  },
  {
    "objectID": "posts/R_basic/index.html",
    "href": "posts/R_basic/index.html",
    "title": "R basic",
    "section": "",
    "text": "R basic"
  },
  {
    "objectID": "posts/test_post/index.html",
    "href": "posts/test_post/index.html",
    "title": "Test Post",
    "section": "",
    "text": "This is a post for test.\nmatplotlib을 활용한 scatter plot 예제\n\n%matplotlib inline\n\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# 데이터 생성\nx = np.random.rand(50)\ny = np.random.rand(50)\ncolors = np.random.rand(50)\nsizes = 1000 * np.random.rand(50)\n\n# scatter plot 그리기\nplt.scatter(x, y, c=colors, s=sizes, alpha=0.5)\n\n# 축 라벨 설정\nplt.xlabel('X label')\nplt.ylabel('Y label')\n\n# 그래프 타이틀 설정\nplt.title('Scatter plot example')\n\n# 그래프 출력\nplt.show()"
  }
]